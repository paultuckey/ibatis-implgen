<?xml version="1.0" encoding="UTF-8"?>
<!--
<!DOCTYPE sqlMap
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
-->
<sqlMap namespace="contact">

    <cacheModel id="getCommunicationCombo-cache" type="MEMORY">
        <flushInterval hours="2"/>
        <property name="reference-type" value="SOFT"/>
    </cacheModel>

    <parameterMap id="updatePerorgUserId-map" class="map">
        <parameter property="rowCount"     javaType="int"     jdbcType="INTEGER" mode="OUT" />
        <parameter property="perorgId"     javaType="long"    jdbcType="NUMERIC"/>
        <parameter property="userId"       javaType="string"  jdbcType="VARCHAR"/>
        <parameter property="auditTranOid" javaType="long"    jdbcType="NUMERIC"/>
    </parameterMap>

    <parameterMap id="insertAuditTransaction-map" class="map">
        <parameter property="auditTranOid" javaType="long"           jdbcType="NUMERIC" mode="OUT" />
        <parameter property="operation"    javaType="string"         jdbcType="VARCHAR"/>
        <parameter property="comment"      javaType="string"         jdbcType="VARCHAR"/>
    </parameterMap>

    <resultMap id="getCommunicationCombo-result" class="java.util.HashMap">
        <result property="code" column="com_type_code" javaType="string" jdbcType="VARCHAR"/>
        <result property="desc" column="com_type_descr" javaType="string" jdbcType="VARCHAR"/>
    </resultMap>

    <resultMap id="getVendorsAndCustomers-result" class="some.package.SomePersonBean">
        <result property="id"       column="person_id" javaType="long"   jdbcType="NUMERIC"/>
        <result property="name"     column="surname"   javaType="string" jdbcType="VARCHAR"/>
        <result property="addr1"    column="addr_1"    javaType="string" jdbcType="VARCHAR"/>
        <result property="addr2"    column="addr_2"    javaType="string" jdbcType="VARCHAR"/>
        <result property="postCode" column="post_code" javaType="string" jdbcType="VARCHAR"/>
        <result property="country"  column="country"   javaType="string" jdbcType="VARCHAR"/>
    </resultMap>


    <procedure id="getPeopleAssociatedWithProvider" resultMap="pawp-result">
        {call w_get_people_for_provider(#moeProviderId:NUMERIC#, #location:INTEGER#, #getAll:NUMERIC#, #prefMedIndOn:INTEGER#)}
    </procedure>

    <procedure id="getCommunicationCombo" parameterClass="string" resultMap="getCommunicationCombo-result" cacheModel="getCommunicationCombo-cache">
        {call w_get_com_combo(#value:NUMERIC#}
    </procedure>

    <procedure id="isUseridInPerorg" parameterClass="string" resultClass="boolean" >
        {call w_is_userid_in_perorg(#userName:VARCHAR#}
    </procedure>

    <procedure id="insertAuditTransaction" parameterMap="insertAuditTransaction-map" >
        {call w_ins_audit_transaction(?,?,?)}
    </procedure>
</sqlMap>